{% extends "base.html" %}
{% block title %}Inventory Detail â€“ Aircraft Ops{% endblock %}

{% block content %}
  <h2>Inventory Detail</h2>

  <!-- two-column form, re-using the Ramp-Boss grid styles -->
  <div class="ramp-form-container">
    <form id="inventory-form"
          method="POST"
          action="{{ url_for('inventory.inventory_detail') }}">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

      <label for="category">Category</label>
      <select id="category" name="category" required>
        {% for c in categories %}
          <option value="{{ c.id }}">{{ c.display_name }}</option>
        {% endfor %}
      </select>

      <label for="name">Item Name</label>
      <input id="name" name="name" required>

      <label for="weight">Wt/Unit</label>
      <div style="display:flex; align-items:center; gap:0.5rem;">
        <input id="weight"
               name="weight"
               type="number"
               step="any"
               min="0"
               required
               style="flex:1; min-width:16ch">
        <select id="weight_unit" name="weight_unit">
          <option value="lbs" {% if inv_weight_unit=='lbs' %}selected{% endif %}>lbs</option>
          <option value="kg"  {% if inv_weight_unit=='kg'  %}selected{% endif %}>kg</option>
        </select>
      </div>

      <label for="qty">Quantity</label>
      <input id="qty" name="qty" type="number" step="1" min="0" required>

      <label for="direction">Direction</label>
      <select id="direction" name="direction">
        <option value="in">Incoming</option>
        <option value="out">Outgoing</option>
      </select>

      <button type="submit" style="grid-column:span 2; margin-top:1rem;">
        Save Entry
      </button>
    </form>
  </div>

  <div id="inventory-detail-table"><!-- AJAX detail table loads here --></div>

  <script>
    async function loadInventoryDetail() {
      const resp = await fetch("{{ url_for('inventory.inventory_detail_table') }}");
      document.getElementById("inventory-detail-table").innerHTML = await resp.text();
    }
    loadInventoryDetail();
  </script>
{% endblock %}
