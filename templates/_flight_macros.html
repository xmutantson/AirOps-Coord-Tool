{# templates/_flight_macros.html #}

{% macro flight_row(f, hide_tbd, show_distance=False) -%}
<tr class="clickable{% if not f.dest_mapped %} red-border{% elif f.is_ramp_entry and f.sent == 0 %} yellow-border{% endif %}">
  <td class="col-code">
    <a href="{{ url_for('ramp.edit_flight', fid=f.id) }}" class="code-link">
      {{ f.flight_code or 'TBD' }} ‚úèÔ∏è
    </a>
  </td>
  <td class="status">
    {% if f.complete %}üõ¨ Landed{% else %}‚úàÔ∏è In-Flight{% endif %}
  </td>
  <td>{{ f.tail_number }}</td>
  {%- if show_distance %}<td{% if f.distance_stale %} style="opacity:0.5"{% endif %}>{{ f.distance or '' }}</td>{%- endif %}
  {%- for field in [
       'pilot_name',
       'pax_count',
       'origin_view',
       'takeoff_time',
       'dest_view',
       'eta_view',
       'cargo_type',
       'cargo_view',
       'remarks'
     ] %}
    <td>
      {%- if hide_tbd %}
        {{ f[field] | hide_tbd }}
      {%- else %}
        {{ f[field] or 'TBD' }}
      {%- endif %}
    </td>
  {%- endfor %}
</tr>
{%- endmacro %}

{% macro radio_row(f, hide_tbd) -%}
<tr class="clickable{% if not f.dest_mapped %} red-border{% elif f.sent == 0 %} yellow-border{% endif %}"
    onclick="location.href='{{ url_for('radio.radio_detail',fid=f.id) }}'">
  <td class="code-cell">{{ f.flight_code or 'TBD' }}</td>
  <td class="status">{% if f.complete %}üõ¨{% else %}‚úàÔ∏è{% endif %}</td>
  {%- for field in [
       'tail_number',
       'pilot_name',
       'pax_count',
       'origin_view',
       'takeoff_time',
       'dest_view',
       'eta_view',
       'cargo_type',
       'cargo_view',
       'remarks'
     ] %}
    <td>
      {%- if hide_tbd %}
        {{ f[field] | hide_tbd }}
      {%- else %}
        {{ f[field] or 'TBD' }}
      {%- endif %}
    </td>
  {%- endfor %}
</tr>
{%- endmacro %}
